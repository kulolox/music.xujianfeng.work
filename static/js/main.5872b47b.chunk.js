(this.webpackJsonpk_music=this.webpackJsonpk_music||[]).push([[1],{11:function(e,t,n){"use strict";n.d(t,"c",(function(){return u})),n.d(t,"g",(function(){return m})),n.d(t,"a",(function(){return f})),n.d(t,"h",(function(){return d})),n.d(t,"e",(function(){return v})),n.d(t,"d",(function(){return b})),n.d(t,"f",(function(){return p}));var a=n(48),c=n.n(a),r=n(68),o=n(44),i=n(67),u=Object(o.b)("player/getSongUrl",function(){var e=Object(r.a)(c.a.mark((function e(t,n){var a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,n.dispatch)(v(!1)),e.next=4,Object(i.g)(t.id);case 4:return a=e.sent,e.abrupt("return",{autoPlay:t.autoPlay,index:t.index,url:a.data.data[0].url});case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),l=Object(o.c)({name:"player",initialState:{currentIndex:-1,currentUrl:"",playing:!1,loop:!1,volume:60,currentTime:0,seekToTime:0,list:[]},extraReducers:function(e){e.addCase(u.fulfilled,(function(e,t){var n=t.payload,a=n.index,c=n.url,r=n.autoPlay;e.currentIndex=a,e.currentUrl=c,e.playing=r}))},reducers:{setSongList:function(e,t){e.list=t.payload.data,e.currentIndex=0},changeVolume:function(e,t){e.volume=t.payload.volume},setCurrentTime:function(e,t){e.currentTime=t.payload.currentTime},setSeekToTime:function(e,t){e.seekToTime=t.payload.seekToTime},setPlaying:function(e,t){e.playing=t.payload.playing},setCurrentUrl:function(e,t){e.currentUrl=t.payload.url},setCurrentIndex:function(e,t){e.currentIndex=t.payload.index},togglePlaying:function(e,t){var n=t.payload.playing;e.playing=n}}}),s=l.actions,m=s.setSongList,f=(s.setCurrentIndex,s.setCurrentUrl,s.changeVolume),d=s.togglePlaying,v=s.setPlaying,b=s.setCurrentTime,p=s.setSeekToTime;t.b=l.reducer},135:function(e,t,n){e.exports=n(203)},161:function(e,t,n){},201:function(e,t,n){},202:function(e,t,n){"use strict";n.r(t);var a=n(9),c=n(0),r=n.n(c),o=n(87),i=n(8),u=n(28),l=n(1),s=n.n(l),m=n(76),f=n.n(m),d=n(21),v=n(212),b=n(209),p=n(7),O=n(45),j=n.n(O),y=n(36),g=n(11),E=function(){var e=Object(p.c)((function(e){return e.player})),t=e.currentIndex,n=e.currentUrl,a=e.list,o=e.playing,i=e.volume,u=e.seekToTime,l=Object(p.b)(),s=Object(c.useRef)(null);return Object(c.useEffect)((function(){o?s.current.play():s.current.pause()}),[o]),Object(c.useEffect)((function(){s.current.volume=i/100}),[i]),Object(c.useEffect)((function(){s.current.currentTime=u}),[u]),Object(y.a)("timeupdate",(function(){l(Object(g.d)({currentTime:s.current.currentTime}))}),s),Object(y.a)("ended",(function(){if(t<a.length-1){var e=t+1;l(Object(g.c)({id:a[e].id,index:e,autoPlay:!0}))}else l(Object(g.e)({playing:!1}))}),s),Object(y.a)("durationchange",(function(){console.log("onDuration")}),s),r.a.createElement("audio",{ref:s,src:n,preload:"auto"})},h=n(77),x=n.n(h),N=function(){var e=Object(p.c)((function(e){return e.player})),t=e.currentIndex,n=e.list,a=e.playing,o=Object(p.b)(),i=Object(c.useMemo)((function(){return t>0}),[t]),l=Object(c.useMemo)((function(){return n.length>0}),[n]),m=Object(c.useMemo)((function(){return t<n.length-1}),[t,n]),f=function(e){return s()(x.a.button,Object(u.a)({},x.a.disabled,e))};return r.a.createElement("div",{className:x.a.controller},r.a.createElement("div",{className:f(!i),onClick:function(){if(i){var e=t-1;o(Object(g.c)({id:n[e].id,index:e,autoPlay:!0}))}}},r.a.createElement(d.a,{style:{fontSize:22},type:"icon-prev"})),r.a.createElement("div",{className:f(!l),onClick:function(){o(Object(g.h)({playing:!a}))}},a?r.a.createElement(d.a,{style:{fontSize:25},type:"icon-pause"}):r.a.createElement(d.a,{style:{fontSize:25},type:"icon-play"})),r.a.createElement("div",{className:f(!m),onClick:function(){if(m){var e=t+1;o(Object(g.c)({id:n[e].id,index:e,autoPlay:!0}))}}},r.a.createElement(d.a,{style:{fontSize:22},type:"icon-next"})))},_=n(211),k=n(208),C=n(57),T=n(53),w=n.n(T),S=function(){var e,t,n,o,i,u,l=Object(p.c)((function(e){return e.player})),s=l.currentIndex,m=l.list,f=l.currentTime,d=Object(p.b)(),v=Object(c.useState)(!1),b=Object(a.a)(v,2),O=b[0],j=b[1],y=Object(c.useState)(0),E=Object(a.a)(y,2),h=E[0],x=E[1],N=Object(c.useCallback)((function(e){j(!0),x(e)}),[]);return Object(c.useEffect)((function(){d(Object(g.d)({currentTime:0})),x(0),j(!1)}),[s,d]),Object(c.useEffect)((function(){O||x(f)}),[f,O]),r.a.createElement("div",{className:w.a.info},r.a.createElement(_.a,{className:w.a.coverImage,shape:"square",size:36,src:null!==(e=null===(t=m[s])||void 0===t?void 0:t.coverImgUrl)&&void 0!==e?e:"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png"}),r.a.createElement("div",{className:w.a.content},r.a.createElement("div",{className:w.a.head},r.a.createElement("div",null,null!==(n=null===(o=m[s])||void 0===o?void 0:o.name)&&void 0!==n?n:"\u6682\u65e0"),r.a.createElement("div",null,r.a.createElement(C.a,{seconds:h}),"/",r.a.createElement(C.a,{seconds:null===(i=m[s])||void 0===i?void 0:i.seconds}))),r.a.createElement("div",{className:w.a.progress},r.a.createElement(k.a,{onAfterChange:function(){j(!1),d(Object(g.f)({seekToTime:h}))},onChange:N,defaultValue:0,step:.1,tooltipVisible:!1,value:h,max:Math.floor(null===(u=m[s])||void 0===u?void 0:u.seconds)}))))},I=n(128),B=n(207),z=n(129),P=n.n(z),U=n(78),L=n.n(U),q=function(e){var t=e.children,n=e.className,o=e.getContainerDom,i=Object(c.useState)(0),u=Object(a.a)(i,2),l=u[0],m=u[1],f=Object(c.useState)(0),d=Object(a.a)(f,2),v=d[0],b=d[1],p=Object(c.useState)(!1),O=Object(a.a)(p,2),j=O[0],g=O[1],E=Object(c.useRef)(null),h=Object(c.useCallback)((function(e){var t=e.target,n=t.clientHeight,a=t.scrollHeight,c=t.scrollTop;b(c*(n-l)/(a-n))}),[l]);return Object(c.useEffect)((function(){if(e.children&&E.current){var t=E.current,n=t.clientHeight,a=t.scrollHeight;if(a===n)g(!1);else{var c=Math.pow(n,2)/a;g(!0),m(c)}}}),[e.children]),Object(c.useEffect)((function(){o&&o(E.current)}),[o]),Object(y.a)("scroll",h,E),r.a.createElement("div",{className:s()(L.a.container,n)},r.a.createElement("div",{ref:E,className:L.a.scrollContent},t),j&&r.a.createElement("div",{className:L.a.scrollBar},r.a.createElement("span",{style:{height:l,top:v}})))},F=n(67),J=n(46),M=n.n(J),R=/\[(\d{2}):(\d{2}\.\d{1,3})\]/g,W=function(e,t){var n=null,a=e.scrollTop,c=t-a;window.requestAnimationFrame((function t(r){n||(n=r);var o=(r-n)/600,i=Object(B.a)(o);i>1&&(i=1);var u=c*i;e.scrollTop=u+a,i<1&&window.requestAnimationFrame(t)}))},X=function(){var e=Object(p.c)((function(e){return e.player})),t=e.currentTime,n=e.list,o=e.currentIndex,i=Object(c.useState)(""),l=Object(a.a)(i,2),m=l[0],f=l[1],d=Object(c.useMemo)((function(){return function(e){if(!e)return[];for(var t=e.split("\n"),n=[],a=0;a<t.length;a++){var c=t[a],r=R.exec(c);if(r){var o=c.replace(R,"").trim();o&&n.push({time:60*r[1]+1*r[2],txt:o})}}return n.sort((function(e,t){return e.time-t.time})),n}(m)}),[m]),v=Object(c.useMemo)((function(){return d.map((function(e){return e.time}))}),[d]),b=Object(c.useState)(0),O=Object(a.a)(b,2),j=O[0],y=O[1],g=Object(c.useState)(null),E=Object(a.a)(g,2),h=E[0],x=E[1],N=Object(c.useCallback)(P()((function(){return function(e,t){var n=t.length;if(e<=t[0])return 0;if(e>=t[n-1])return n-1;var a,c=0,r=Object(I.a)(t);try{for(r.s();!(a=r.n()).done;){var o=a.value;if(o>e){c=t.indexOf(o)-1;break}}}catch(i){r.e(i)}finally{r.f()}return c}(t,v)}),1e3),[t,v]);return Object(c.useEffect)((function(){y(N())}),[N]),Object(c.useEffect)((function(){var e,t,n=document.getElementsByClassName("lyric");n.length>0&&(e=h,t=n[j],e&&(t.offsetTop>180?W(e,t.offsetTop-180):W(e,0)))}),[j,h]),Object(c.useEffect)((function(){var e,t;f("");var a=null===(e=n[o])||void 0===e?void 0:e.id;(null===(t=n[o])||void 0===t?void 0:t.id)&&Object(F.f)(a).then((function(e){e.data.lrc&&f(e.data.lrc.lyric)}))}),[o,n]),r.a.createElement("div",{className:M.a.lyric},r.a.createElement("div",{className:M.a.title},"\u6b4c\u8bcd"),m?r.a.createElement(q,{getContainerDom:x},r.a.createElement("div",{className:M.a.lyrContainer},d.map((function(e,t){return r.a.createElement("div",{className:s()("lyric",M.a.line,Object(u.a)({},M.a.active,j===t)),key:e.time+e.txt},e.txt)})))):r.a.createElement("div",{className:M.a.noLyric},"\u6682\u65e0\u6b4c\u8bcd"))},Y=n(40),A=n.n(Y);var H=function(){var e=Object(p.c)((function(e){return e.player})),t=e.list,n=e.playing,a=e.currentIndex,c=Object(p.b)();return r.a.createElement("div",{className:A.a.list},r.a.createElement("div",{className:A.a.title},"\u64ad\u653e\u5217\u8868"),r.a.createElement(q,null,t.map((function(e,o){return r.a.createElement("div",{key:e.id,className:A.a.item},r.a.createElement("div",{className:A.a.index},o+1),r.a.createElement("div",{className:A.a.songName},e.name),r.a.createElement("div",{className:A.a.songCreator},e.authors),r.a.createElement("div",{className:A.a.second},r.a.createElement(C.a,{seconds:e.seconds})),r.a.createElement("div",{className:A.a.canPlaying,onClick:function(){return function(e){var n=t.findIndex((function(t){return t.id===e}));c(Object(g.c)({id:e,index:n,autoPlay:!0}))}(e.id)}},o===a&&n?r.a.createElement(d.a,{type:"icon-pause"}):r.a.createElement(d.a,{type:"icon-play"})))}))))},D=n(79),K=n.n(D),Q=function(e){var t,n=Object(p.c)((function(e){return e.player})),a=n.list,c=n.currentIndex;return r.a.createElement("div",{className:s()(K.a.container,e.className)},r.a.createElement("div",{className:K.a.backImg,style:{backgroundImage:"url('".concat(null===(t=a[c])||void 0===t?void 0:t.coverImgUrl,"')")}}),r.a.createElement("div",{className:K.a.content},r.a.createElement(H,null),r.a.createElement(X,null)))},V=n(80),Z=n.n(V),G=function(){var e=Object(p.c)((function(e){return e.player})).volume,t=Object(p.b)(),n=Object(c.useRef)(null),o=Object(c.useState)(!1),i=Object(a.a)(o,2),l=i[0],m=i[1];Object(y.c)(n,(function(){return m(!1)}));var f=function(){m(!l)};return r.a.createElement("div",{className:Z.a.volume,ref:n},r.a.createElement(b.a,{onClick:f,type:"text",icon:r.a.createElement(d.a,{type:"icon-volume"})}),r.a.createElement("div",{className:s()(Z.a.content,Object(u.a)({},Z.a.hide,!l))},r.a.createElement(k.a,{value:e,min:0,max:100,onChange:function(e){t(Object(g.a)({volume:e}))},onAfterChange:function(){f()}})))},$=function(){var e=Object(p.c)((function(e){return e.player})).list,t=Object(c.useState)(!1),n=Object(a.a)(t,2),o=n[0],i=n[1];return r.a.createElement("div",{className:j.a.player},r.a.createElement(E,null),r.a.createElement("div",{className:j.a.audio},r.a.createElement(N,null),r.a.createElement(S,null),r.a.createElement("div",{className:j.a.menu},r.a.createElement("div",{className:j.a.button},r.a.createElement(G,null)),r.a.createElement("div",{className:j.a.button},r.a.createElement(v.a,{count:e.length,overflowCount:99,size:"small",offset:[5,0]},r.a.createElement(b.a,{onClick:function(){i(!o)},type:"text",icon:r.a.createElement(d.a,{type:"icon-music-list"})}))))),r.a.createElement(Q,{className:Object(u.a)({},j.a.hide,!o)}))},ee=function(){var e=Object(c.useState)(!0),t=Object(a.a)(e,2),n=t[0],o=t[1];return r.a.createElement("div",{className:s()(f.a.playerBox,Object(u.a)({},f.a.locked,n))},r.a.createElement("div",{className:f.a.lockBox,onClick:function(){o(!n)}},r.a.createElement(d.a,{type:n?"icon-lock_fill":"icon-unlock_fill"})),r.a.createElement($,null))},te=(n(201),r.a.lazy((function(){return Promise.all([n.e(0),n.e(6),n.e(5)]).then(n.bind(null,286))}))),ne=r.a.lazy((function(){return Promise.all([n.e(0),n.e(4),n.e(7)]).then(n.bind(null,287))}));t.default=function(){var e=Object(p.b)(),t=Object(y.b)("cache-song-list",null),n=Object(a.a)(t,1)[0];return Object(c.useEffect)((function(){n&&(e(Object(g.g)({data:n})),e(Object(g.c)({id:n[0].id,index:0,autoPlay:!1})))}),[n,e]),r.a.createElement(c.Fragment,null,r.a.createElement(o.a,null,r.a.createElement(r.a.Suspense,{fallback:"\u52a0\u8f7d\u4e2d..."},r.a.createElement(i.c,null,r.a.createElement(i.a,{path:"/",exact:!0,component:te}),r.a.createElement(i.a,{path:"/album/:id?",exact:!0,component:ne})))),r.a.createElement(ee,null))}},203:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(10),o=n.n(r),i=n(7);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var u=n(44),l=n(31),s=n(11),m=Object(l.c)({player:s.b}),f=Object(u.d)({serializableCheck:!1,immutableCheck:!1});var d=Object(u.a)({reducer:m,devTools:!1,middleware:f});n(161);!function(){var e=n(202).default;o.a.render(c.a.createElement(i.a,{store:d},c.a.createElement(e,null)),document.getElementById("root"))}(),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},21:function(e,t,n){"use strict";var a=n(204),c=Object(a.a)({scriptUrl:"//at.alicdn.com/t/font_2060370_k34zyn39meh.js"});t.a=c},36:function(e,t,n){"use strict";n.d(t,"b",(function(){return l})),n.d(t,"d",(function(){return s})),n.d(t,"a",(function(){return m})),n.d(t,"c",(function(){return f}));var a=n(62),c=n(9),r=n(0),o=n(8),i=n(125),u=n.n(i);function l(e,t){var n=Object(r.useState)((function(){try{var n=window.localStorage.getItem(e);return n?JSON.parse(n):t}catch(a){return console.log(a),t}})),a=Object(c.a)(n,2),o=a[0],i=a[1];return[o,function(t){try{var n=t instanceof Function?t(o):t;i(n),window.localStorage.setItem(e,JSON.stringify(n))}catch(a){console.log(a)}}]}function s(){var e=Object(o.h)(),t=Object(o.g)(),n=Object(o.f)(),c=Object(o.i)();return Object(r.useMemo)((function(){return{push:n.push,replace:n.replace,pathname:t.pathname,query:Object(a.a)(Object(a.a)({},u.a.parse(t.search)),e),match:c,location:t,history:n}}),[e,c,t,n])}function m(e,t,n){var a=Object(r.useRef)();Object(r.useEffect)((function(){var c=(null===n||void 0===n?void 0:n.current)||window;if(c&&c.addEventListener){a.current!==t&&(a.current=t);var r=function(e){(null===a||void 0===a?void 0:a.current)&&a.current(e)};return c.addEventListener(e,r),function(){c.removeEventListener(e,r)}}}),[e,n,t])}function f(e,t){Object(r.useEffect)((function(){var n=function(n){e.current&&!e.current.contains(n.target)&&t(n)};return document.addEventListener("mousedown",n),document.addEventListener("touchstart",n),function(){document.removeEventListener("mousedown",n),document.removeEventListener("touchstart",n)}}),[e,t])}},40:function(e,t,n){e.exports={list:"_1LxbsqqjGBLOqVqgBqCCov",title:"_3dvqaAGxilCidD4Ur_bugg",item:"_1wJIFRmT2YyJljNevROwZk",index:"_3nf1fcYn-6cbRPeKn06mrZ",songName:"WxSHLXNQQFOziMm1aCKqy",songCreator:"_1ugcmccGusczdJlWYf9212",second:"_37jlLwb08YBMhRxCkQWOmW",canPlaying:"_2ZEWdV13aH6e9v8cnt3EYm"}},45:function(e,t,n){e.exports={hoverBox:"lxJgT-fjjXw_7rraI7bYO",player:"_3DhximAgjXprNcUZvJJBb4",audio:"_1Pe6zvjWU7bP1BxTzrxfas",menu:"tgQynu_4eKMbG5-UX8NkB",button:"rurHG8HbXrba9qsVi4f3_",hide:"_3o0vr9lO59B0yORstHN0Ml",rotate:"VV3QjzPv7HgLzppge8uuk"}},46:function(e,t,n){e.exports={lyric:"_36gCoVKLyhO1nTu9xYoMEc",title:"_3qqYsPxmovIwQArcHXRQll",noLyric:"_1DrgpvSbpwma0XYK9iPw5M",lyrContainer:"_14oc-c8q9_sgiGwNFDFdX9",line:"pCUgA4uSUiTJazD25gTI4",active:"_3Bk07JaIoB-KcRNGIdSTj0"}},53:function(e,t,n){e.exports={hoverBox:"_2DIFyG2nNwJiUgBuyjA1U3",info:"JZBTfYdIBc87LroL0lx1O",coverImage:"_1eZmvcMW81npTZkS2qKWII",content:"_17Fc62jpOX9AK3O4AJzpRw",head:"_33rQxlJpmYr0X-9NEiPJzA",progress:"_3PodrHzN9N9CyoaoPhuZrZ",rotate:"_2tBuQko9JBjNjg2AC-GUo-"}},57:function(e,t,n){"use strict";var a=n(0),c=n.n(a),r=n(110),o=n.n(r);t.a=function(e){return c.a.createElement("span",{className:e.className},o()(new Date(1e3*e.seconds)).utcOffset(0).format("mm:ss"))}},67:function(e,t,n){"use strict";n.d(t,"c",(function(){return b})),n.d(t,"d",(function(){return p})),n.d(t,"b",(function(){return O})),n.d(t,"a",(function(){return j})),n.d(t,"e",(function(){return y})),n.d(t,"g",(function(){return g})),n.d(t,"f",(function(){return E}));var a=n(48),c=n.n(a),r=n(68),o=n(92),i=n.n(o),u={baseURL:"/",transformResponse:[function(e){return e}],timeout:3e4,responseType:"json",maxContentLength:2e3,validateStatus:function(e){return e>=200&&e<300}},l=[],s=i.a.CancelToken,m=function(e){for(var t in l){var n=t,a=l[t];a.url===e.url+"&request_type="+e.method&&(a.cancel(),l.splice(n,1))}},f=i.a.create(u);f.interceptors.request.use(function(){var e=Object(r.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(t),e.next=3,new s((function(e){l.push({url:t.url+"&request_type="+t.method,cancel:e})}));case 3:return t.cancelToken=e.sent,e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),(function(e){return Promise.reject(e)})),f.interceptors.response.use((function(e){return m(e.config),e}),(function(e){return Promise.reject(e)}));var d=f,v="http://api.xujianfeng.work";function b(e){return d.get("".concat(v,"/banner?type=").concat(e))}function p(){return d.get("".concat(v,"/playlist/catlist"))}function O(e){var t=e.limit,n=e.cat,a=e.offset,c=void 0===a?0:a,r=e.order,o=void 0===r?"hot":r;return d.get("".concat(v,"/top/playlist/?limit=").concat(t,"&order=").concat(o,"&offset=").concat(c,"&cat=").concat(n))}function j(e){return d.get("".concat(v,"/playlist/detail?id=").concat(e))}function y(e){return d.get("".concat(v,"/song/detail?ids=").concat(e))}function g(e){return d.get("".concat(v,"/song/url?id=").concat(e))}function E(e){return d.get("".concat(v,"/lyric?id=").concat(e))}},76:function(e,t,n){e.exports={playerBox:"_1URRVA-GI-BhQrZHYVMx7q",lockBox:"_3x_32CtSBvIaSYOhs1xoFw",locked:"_1KXt7a7thzbSV41Jrlm5r3"}},77:function(e,t,n){e.exports={controller:"_3nxUfdN_1S6Ajw7_sKNZN2",button:"_2zax7mXYqEFKOWCa9eaYH7",disabled:"_3TDBCUO2ogsKqFQmWF9sdy"}},78:function(e,t,n){e.exports={container:"_1y9RWNpnFF9NnWRjrpfKOK",scrollContent:"_1lIo99iXuF_CW3FF83M_DZ",scrollBar:"_1_rEIrL1zBBv65zuNSJ9E7"}},79:function(e,t,n){e.exports={container:"FCL-Q5nnH7yHs3pSuW9DD",backImg:"_1WUIbNukniQMOFv1psCOM0",content:"_2X1SQjzhy3UivK-25ecvf1"}},80:function(e,t,n){e.exports={volume:"_1mFScWrawXQlIT_1Yl0hpZ",content:"_1e0pTL8BnuE8N4dXeEUe7x",hide:"_2SNfEAz9V5mSeeCnYO-O57"}}},[[135,2,3]]]);
//# sourceMappingURL=main.5872b47b.chunk.js.map