(this.webpackJsonpk_music=this.webpackJsonpk_music||[]).push([[5],{215:function(e,t,a){"use strict";var n=a(9),c=a(0),r=a.n(c),o=a(216),i=a.n(o);t.a=function(e){var t=Object(c.useState)(!1),a=Object(n.a)(t,2),o=a[0],l=a[1];return Object(c.useEffect)((function(){var t=new Image;return t.src=e.src,t.onload=function(){l(!0)},t.onload=function(){}}),[e.src]),r.a.createElement("img",{src:o?e.src:i.a,style:{width:e.width,height:e.height,border:e.border?"1px solid #f1f1f1":"none"},alt:""})}},216:function(e,t,a){e.exports=a.p+"static/media/default_image.3590e8c0.svg"},222:function(e,t,a){},229:function(e,t,a){e.exports={category:"_3mAHRFcYGDiGQD5NjIXGPy",cat:"_2fL91aoxtpB750p_bV8Grf"}},230:function(e,t,a){e.exports={catList:"mEruZ2ckuwrGDZ2MSXJCo",catItem:"_2O84mjn8D8wOpxfnqEOtXv",catType:"_3oAYWiiJH6phwibICqvAt3",catContent:"gTqd4UnIQvBWXOCowsaEq",tag:"_3DVQ_vSuNEcYjSVWusAXTj"}},233:function(e,t,a){e.exports={swiper:"_1EPEcDdAt_xfYq1lMSsMNn"}},244:function(e,t,a){e.exports={home:"_1rW0pNaf1fNsEyxJ1Mfjzu",albumBox:"DSzUk1jApFhiIiiziwiiJ",list:"_1LyBgoCtD8vu00-fH7p4bX",album:"_25TOVTjWvPZEpDlZ4Ctxbi",cover:"_12_QnF4bHP0O3Cx_-GWY_i",playCount:"tcVtdPf6Ib8JCZMb4hjSI",creatorName:"CRwK1pNC0vrWnK4-lgwX5",name:"_2M4N4JW1q7OQBBF9dnfQqx",loading:"_2Ip9WDlAUl5XMui_Of-U7r",pagination:"_1QrPHZIz1OLO5wAAzxjVHI"}},286:function(e,t,a){"use strict";a.r(t);var n=a(48),c=a.n(n),r=a(68),o=a(9),i=a(0),l=a.n(i),s=a(87),u=a(245),m=a(280),p=a(228),f=a(67),E=a(21),d=a(215),b=a(130),v=a(209),g=a(229),C=a.n(g),y=(a(222),a(288)),N=a(230),O=a.n(N),j=y.a.CheckableTag,_=function(e){return l.a.createElement("div",{className:O.a.catList},e.catList.map((function(t){return l.a.createElement("div",{key:t.type,className:O.a.catItem},l.a.createElement("div",{className:O.a.catType},t.typeName),l.a.createElement("div",{className:O.a.catContent},t.list.map((function(t){return l.a.createElement(j,{key:t.name,className:O.a.tag,checked:e.selectedCat===t.name,onClick:function(){return e.onSelect(t.name)}},t.name)}))))})))},h=function(e){var t=e.catSelect,a=Object(i.useState)(!1),n=Object(o.a)(a,2),c=n[0],r=n[1],s=Object(i.useState)([]),u=Object(o.a)(s,2),m=u[0],p=u[1],d=Object(i.useCallback)((function(e){t(e),r(!1)}),[t]);return Object(i.useEffect)((function(){Object(f.d)().then((function(e){var t=e.data,a=t.categories,n=t.sub,c=[];Object.keys(a).forEach((function(e){c.push({type:parseInt(e),typeName:a[e],list:n.filter((function(t){return t.category===parseInt(e)}))})})),p(c)}))}),[]),l.a.createElement("div",{className:C.a.category},l.a.createElement(b.a,{placement:"topLeft",visible:c,content:l.a.createElement(_,{catList:m,selectedCat:e.currentCat,onSelect:d}),trigger:"click"},l.a.createElement(v.a,{onClick:function(){return r(!c)}},"\u9009\u62e9\u98ce\u683c",l.a.createElement(E.a,{type:"icon-up"}))),l.a.createElement("div",{className:C.a.cat},"\u5f53\u524d\u98ce\u683c\uff1a",e.currentCat))},S=a(283),I=a(233),w=a.n(I),A=function(){var e=Object(i.useState)([]),t=Object(o.a)(e,2),a=t[0],n=t[1];return Object(i.useEffect)((function(){var e=localStorage.getItem("BANNERS");e?n(JSON.parse(e)):function(){var e=Object(r.a)(c.a.mark((function e(){var t,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(f.c)(0);case 2:t=e.sent,a=t.data.banners.map((function(e){return{scm:e.scm,imageUrl:e.imageUrl}})),localStorage.setItem("BANNERS",JSON.stringify(a)),n(a);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[]),l.a.createElement(S.a,{className:w.a.swiper,autoplay:!0},a.map((function(e){return l.a.createElement("div",{key:e.scm},l.a.createElement("img",{src:e.imageUrl,alt:""}))})))},L=a(244),k=a.n(L),x={pageNo:1,totalCount:0,cat:"\u534e\u8bed",albumList:[]};function T(e,t){switch(t.type){case"GET_ALBUM_LIST":var a=t.payload,n=a.albumList,c=a.totalCount;return e.albumList=n,void(e.totalCount=c);case"CAT_SELECT":return e.pageNo=1,void(e.cat=t.payload);case"PAGE_CHANGE":return void(e.pageNo=t.payload);default:return}}t.default=function(){var e=Object(p.a)(T,x),t=Object(o.a)(e,2),a=t[0],n=t[1],b=a.pageNo,v=a.totalCount,g=a.cat,C=a.albumList,y=Object(i.useState)(!1),N=Object(o.a)(y,2),O=N[0],j=N[1],_=Object(i.useCallback)((function(e){n({type:"CAT_SELECT",payload:e}),localStorage.setItem("CAT_SELECT",e)}),[n]);return Object(i.useEffect)((function(){var e=localStorage.getItem("CAT_SELECT")||"";e&&n({type:"CAT_SELECT",payload:e})}),[n]),Object(i.useEffect)((function(){function e(){return(e=Object(r.a)(c.a.mark((function e(){var t,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return j(!0),e.next=3,Object(f.b)({cat:g,limit:25,offset:25*(b-1)});case 3:t=e.sent,a=t.data,n({type:"GET_ALBUM_LIST",payload:{albumList:a.playlists.map((function(e){return{id:e.id,coverImgUrl:e.coverImgUrl,playCount:e.playCount,name:e.name,creator:e.creator}})),totalCount:a.total}}),j(!1);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[g,n,b]),l.a.createElement("div",{className:k.a.home},l.a.createElement(A,null),l.a.createElement("div",{className:k.a.albumBox},l.a.createElement(h,{currentCat:g,catSelect:_}),l.a.createElement("div",{className:k.a.list},O?l.a.createElement("div",{className:k.a.loading},l.a.createElement(u.a,null)):C.map((function(e){return l.a.createElement(s.b,{key:e.id,className:k.a.album,to:"/album/".concat(e.id)},l.a.createElement("div",{className:"hoverBox"},l.a.createElement("div",{className:k.a.cover},l.a.createElement(d.a,{src:e.coverImgUrl,width:"100%",height:"auto"}),l.a.createElement("div",{className:k.a.playCount},l.a.createElement(E.a,{type:"icon-play-count",style:{fontSize:16,marginRight:2}}),l.a.createElement("span",null,e.playCount)),l.a.createElement("div",{className:k.a.creatorName},e.creator.nickname)),l.a.createElement("div",{className:k.a.name},e.name)))}))),l.a.createElement(m.a,{className:k.a.pagination,defaultCurrent:1,current:b,total:v,onChange:function(e){n({type:"PAGE_CHANGE",payload:e})},defaultPageSize:25,showSizeChanger:!1})))}}}]);
//# sourceMappingURL=5.f4da401d.chunk.js.map